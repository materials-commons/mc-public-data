<div class="details summary">
  <div class="col-sm-9">
    <div class="summary">
      <h4 class="title">{{ctrl.dataset.title}}</h4>
      <b class="title">Description</b>
      <p class="field-value">{{ctrl.dataset.description }}</p>
      <div class="form-horizontal">
        <div class="dataset">
          <property-value property="DOI" value="ctrl.dataset.DOI"></property-value>
          <property-value property="Date" value="ctrl.dataset.birthtime | toDateStringFilter"></property-value>
          <property-value property="Author" value="ctrl.dataset.author"></property-value>
          <property-value property="Other Authors" value="ctrl.dataset.other_authors"></property-value>
          <div ng-if="ctrl.user">
            <tags-input ng-model="ctrl.dataset.tags"
                        display-property="id"
                        key-property="id"
                        on-tag-adding="ctrl.addTag($tag)"
                        on-tag-removing="ctrl.removeTag($tag)"
                        replace-spaces-with-dashes="false"
                        add-on-paste="true">
              <auto-complete display-property="id" source="ctrl.loadTags($query)" min-length="1"></auto-complete>
            </tags-input>
          </div>
          <div ng-if="!ctrl.user">
            <tags-input ng-model="ctrl.dataset.tags" display-property="id"
                        disabled="true" placeholder="Login to add tags"></tags-input>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-sm-3">
    <div class="row">
      <h6>Summary of views and votes</h6>
      <p class="small action-count"><span>{{ctrl.all_actions.views}} views </span>
        <span style="padding-left: 10px;">{{ctrl.all_actions.appreciations}} Appreciations</span>
        <a ng-if="false" class="pull-right theme"><i class="fa fa-fw fa-bookmark-o"></i>Bookmark</a></p>
    </div>
    <div ng-if="ctrl.user" class="row text-center">
      <div ng-if="ctrl.dataset.appreciate">
        <button ng-click="ctrl.removeAppreciate()" type="button" class="btn btn-circle btn-xl">
          <i class="fa fa-thumbs-up fa-1x" style="color:lightgrey"></i>
        </button>
        <p class="small theme">Appreciated</p>
      </div>
      <div ng-if="!ctrl.dataset.appreciate">
        <button ng-click="ctrl.appreciate()" type="button" class="btn btn-circle btn-xl">
          <i class="fa fa-thumbs-up fa-1x"></i>
        </button>
        <p class="small theme">Appreciate Work</p>
      </div>
    </div>
    <div class="more-datasets">
      <h4>More data sets by {{ctrl.dataset.author}}</h4>
      <div ng-show="ctrl.dataset.other_datasets.length === 1">
        No datasets
      </div>
      <div class="form-horizontal" ng-repeat="ds in ctrl.dataset.other_datasets">
        <div ng-if="ds.id !== ctrl.dataset.id">
          <b><a class="title" ui-sref="details({id: ds.id})">{{ds.title}}</a></b>
          <p class="field-value">{{ds.description | limitTo: 100}} ... </p>
          <property-value property="Author" value="ds.author"></property-value>
          <property-value property="Files" value="ds.files.length"></property-value>
          <property-value property="DOI" value="ds.DOI" ui-sref="details({id: ds.id})"
                          apply="theme"></property-value>
          <hr/>
        </div>
      </div>
    </div>
  </div>
</div>
